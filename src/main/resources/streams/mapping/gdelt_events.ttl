@prefix : <http://vocab.org/transit/terms/>.
@prefix rr: <http://www.w3.org/ns/r2rml#>.
@prefix rml: <http://semweb.mmlab.be/ns/rml#>.
@prefix ql: <http://semweb.mmlab.be/ns/ql#>.
@prefix gdelt: <http://gdelt.stream/vocab/>.
@prefix xsd: <http://www.w3.org/2001/XMLSchema#>.
@prefix wgs84_pos: <http://www.w3.org/2003/01/geo/wgs84_pos#>.
@prefix carml: <http://carml.taxonic.com/carml/> .
@prefix vocals: <http://w3id.org/rsp/vocals#> .
@prefix cameo: <http://gdelt.org/cameo/>.


<source>  rml:source [
                a vocals:Stream ;
                vocals:streamName "GDELTStream" ;
             ] ;
             rml:referenceFormulation ql:CSV .

<#GDELTMapping> a rr:TriplesMap ;
  rml:logicalSource  <source>;
  rr:subjectMap [
    rr:template "http://gdelt.stream/{GLOBALEVENTID}";
    rr:class gdelt:Event;
    rr:graphMap [ rr:template  "http://gdelt.stream/time/{DATEADDED}" ]
  ];

  rr:predicateObjectMap [
      rr:predicate rdf:type;
      rr:objectMap [
         rr:template "http://gdelt.stream#{EventCode}";
        ]
      ];

  rr:predicateObjectMap [
    rr:predicate rdf:type;
    rr:objectMap [
      rr:template "http://gdelt.stream#{EventBaseCode}";
      ]
    ];

  rr:predicateObjectMap [
        rr:predicate rdf:type;
        rr:objectMap [
          rr:template "http://gdelt.stream#{EventRootCode}";
          ]
        ];

  rr:predicateObjectMap [
    rr:predicate sem:hasActor;
     rr:objectMap [ rr:parentTriplesMap <#Actor1TriplesMap> ];
    ];

  rr:predicateObjectMap [
    rr:predicate sem:hasActor;
     rr:objectMap [ rr:parentTriplesMap <#Actor2TriplesMap> ];
    ];


      rr:predicateObjectMap [
        rr:predicate sem:eventSourceURL;
        rr:objectMap [
          rml:reference "SOURCEURL";
          ]
        ];


 rr:predicateObjectMap [
        rr:predicate sem:hasTimestamp;
        rr:objectMap [
          rml:reference "SQLDATE";
          ]
        ];



  rr:predicateObjectMap [
        rr:predicate sem:hasTimestamp;
        rr:objectMap [
          rml:reference "MonthYear";
          ]
        ];

  rr:predicateObjectMap [
        rr:predicate sem:hasTimestamp;
        rr:objectMap [
          rml:reference "Year";
          ]
        ];

  rr:predicateObjectMap [
        rr:predicate cameo:isRootEvent;
        rr:objectMap [
          rml:reference "IsRootEvent";
          ]
        ];

     rr:predicateObjectMap [
           rr:predicate rdf:type;
           rr:objectMap [
             rml:reference "QuadClass";
             ]
           ]; rdf:type


     rr:predicateObjectMap [
           rr:predicate cameo:goldsteinScale;
           rr:objectMap [
             rml:reference "GoldsteinScale";
             ]
           ];


        rr:predicateObjectMap [
              rr:predicate cameo:mentionsNumber;
              rr:objectMap [
                rml:reference "NumMentions";
                ]
              ];


         rr:predicateObjectMap [
               rr:predicate cameo:sourcesNumber;
               rr:objectMap [
                 rml:reference "NumSources";
                 ]
               ];


         rr:predicateObjectMap [
               rr:predicate cameo:articlesNumber;
               rr:objectMap [
                 rml:reference "NumArticles";
                 ]
               ];


         rr:predicateObjectMap [
               rr:predicate cameo:toneAverage;
               rr:objectMap [
                 rml:reference "AvgTone";
                 ]
               ];

         rr:predicateObjectMap [
                    rr:predicate cameo:geoType;
                    rr:objectMap [
                      rml:reference "ActionGeo_Type";
                      ]
                    ];

          rr:predicateObjectMap [
                rr:predicate cameo:geoFullName;
                rr:objectMap [
                  rml:reference "ActionGeo_FullName";
                  ]
                ];

           rr:predicateObjectMap [
                 rr:predicate cameo:geoCountryCode;
                 rr:objectMap [
                   rml:reference "ActionGeo_CountryCode";
                   ]
                 ];


          rr:predicateObjectMap [
                rr:predicate cameo:geoADM1Code;
                rr:objectMap [
                  rml:reference "ActionGeo_ADM1Code";
                  ]
                ];

          rr:predicateObjectMap [
                rr:predicate cameo:geoADM2Code;
                rr:objectMap [
                  rml:reference "ActionGeo_ADM2Code";
                  ]
                ];

           rr:predicateObjectMap [
            rr:predicate cameo:geoLNAG;
            rr:objectMap [
              rml:reference "ActionGeo_Long";
              ]
            ];


          rr:predicateObjectMap [
            rr:predicate cameo:geoLAT;
            rr:objectMap [
              rml:reference "ActionGeo_Lat";
              ]
            ];

          rr:predicateObjectMap [
            rr:predicate cameo:geoFeatureID;
            rr:objectMap [
              rml:reference "ActionGeo_FeatureID";
              ]
            ];

  .

  <#Actor1TriplesMap> rml:logicalSource <source> ;

  rr:subjectMap [
      rr:template "http://gdelt.stream/actor/{Actor1Name}";
      rr:class sem:Actor
    ];


  rr:predicateObjectMap [
    rr:predicate cameo:actorCode;
    rr:objectMap [
      rml:reference "Actor1Code";
      ]
    ];

  rr:predicateObjectMap [
    rr:predicate cameo:actorName;
    rr:objectMap [
      rml:reference "Actor1Name";
      ]
    ];

  rr:predicateObjectMap [
      rr:predicate cameo:actorCountry;
      rr:objectMap [
        rml:reference "Actor1CountryCode";
        ]
      ];

  rr:predicateObjectMap [
      rr:predicate cameo:actorKnownGroup;
      rr:objectMap [
        rml:reference "Actor1KnownGroupCode";
        ]
      ];

  rr:predicateObjectMap [
      rr:predicate cameo:actorEthnic;
      rr:objectMap [
        rml:reference "Actor1EthnicCode";
        ]
      ];

  rr:predicateObjectMap [
      rr:predicate cameo:actorReligion;
      rr:objectMap [
        rml:reference "Actor1Religion1Code";
        ]
      ];

  rr:predicateObjectMap [
      rr:predicate cameo:actorReligion;
      rr:objectMap [
        rml:reference "Actor1Religion2Code";
        ]
      ];

  rr:predicateObjectMap [
      rr:predicate sem:hasActorType;
      rr:objectMap [
        rr:class sem:ActorType;
        rml:reference "Actor1Type1Code";
        ]
      ];

  rr:predicateObjectMap [
        rr:predicate sem:hasActorType;
        rr:objectMap [
          rr:class sem:ActorType;
          rml:reference "Actor1Type2Code";
          ]
        ];

  rr:predicateObjectMap [
        rr:predicate sem:hasActorType;
        rr:objectMap [
          rr:class sem:ActorType;
          rml:reference "Actor1Type3Code";
          ]
        ];

    rr:predicateObjectMap [
               rr:predicate cameo:geoType;
               rr:objectMap [
                 rml:reference "Actor1Geo_Type";
                 ]
               ];

      rr:predicateObjectMap [
            rr:predicate cameo:geoFullName;
            rr:objectMap [
              rml:reference "Actor1Geo_FullName";
              ]
            ];

      rr:predicateObjectMap [
            rr:predicate cameo:geoCountryCode;
            rr:objectMap [
              rml:reference "Actor1Geo_CountryCode";
              ]
            ];


      rr:predicateObjectMap [
            rr:predicate cameo:geoADM1Code;
            rr:objectMap [
              rml:reference "Actor1Geo_ADM1Code";
              ]
            ];

      rr:predicateObjectMap [
            rr:predicate cameo:geoADM2Code;
            rr:objectMap [
              rml:reference "Actor1Geo_ADM2Code";
              ]
            ];

      rr:predicateObjectMap [
            rr:predicate cameo:geoLNAG;
            rr:objectMap [
              rml:reference "Actor1Geo_Long";
              ]
            ];

      rr:predicateObjectMap [
            rr:predicate cameo:geoLAT;
            rr:objectMap [
              rml:reference "Actor1Geo_Lat";
              ]
            ];

      rr:predicateObjectMap [
            rr:predicate cameo:geoFeatureID;
            rr:objectMap [
              rml:reference "Actor1Geo_FeatureID";
              ]
            ];

  .

   <#Actor2TriplesMap>
   rml:logicalSource  <source> ;
    rr:subjectMap [
        rr:template "http://gdelt.stream/actor/{Actor2Name}";
        rr:class sem:Actor
      ];

  rr:predicateObjectMap [
    rr:predicate cameo:actorCode;
    rr:objectMap [
      rml:reference "Actor2Code";
      ]
    ];

  rr:predicateObjectMap [
    rr:predicate cameo:actorName;
    rr:objectMap [
      rml:reference "Actor2Name";
      ]
    ];

  rr:predicateObjectMap [
      rr:predicate cameo:actorCountry;
      rr:objectMap [
        rml:reference "Actor2CountryCode";
        ]
      ];

  rr:predicateObjectMap [
      rr:predicate cameo:actorKnownGroup;
      rr:objectMap [
        rml:reference "Actor2KnownGroupCode";
        ]
      ];

  rr:predicateObjectMap [
      rr:predicate cameo:actorEthnic;
      rr:objectMap [
        rml:reference "Actor2EthnicCode";
        ]
      ];

  rr:predicateObjectMap [
      rr:predicate cameo:actorReligion;
      rr:objectMap [
        rml:reference "Actor2Religion1Code";
        ]
      ];

  rr:predicateObjectMap [
      rr:predicate cameo:actorReligion;
      rr:objectMap [
        rml:reference "Actor2Religion2Code";
        ]
      ];

  rr:predicateObjectMap [
      rr:predicate sem:hasActorType;
      rr:objectMap [
        rr:class sem:ActorType;
        rml:reference "Actor2Type1Code";
        ]
      ];

  rr:predicateObjectMap [
        rr:predicate sem:hasActorType;
        rr:objectMap [
          rr:class sem:ActorType;
          rml:reference "Actor2Type2Code";
          ]
        ];

  rr:predicateObjectMap [
        rr:predicate sem:hasActorType;
        rr:objectMap [
          rr:class sem:ActorType;
          rml:reference "Actor2Type3Code";
          ]
        ];

        rr:predicateObjectMap [
              rr:predicate cameo:geoType;
              rr:objectMap [
                rml:reference "Actor2Geo_Type";
                ]
              ];


          rr:predicateObjectMap [
                rr:predicate cameo:geoFullName;
                rr:objectMap [
                  rml:reference "Actor2Geo_FullName";
                  ]
                ];

       rr:predicateObjectMap [
                 rr:predicate cameo:geoCountryCode;
                 rr:objectMap [
                   rml:reference "Actor2Geo_CountryCode";
                   ]
                 ];


      rr:predicateObjectMap [
                rr:predicate cameo:geoADM1Code;
                rr:objectMap [
                  rml:reference "Actor2Geo_ADM1Code";
                  ]
                ];


      rr:predicateObjectMap [
                rr:predicate cameo:geoADM2Code;
                rr:objectMap [
                  rml:reference "Actor2Geo_ADM2Code";
                  ]
                ];

      rr:predicateObjectMap [
            rr:predicate cameo:geoLNAG;
            rr:objectMap [
              rml:reference "Actor2Geo_Long";
              ]
            ];


      rr:predicateObjectMap [
            rr:predicate cameo:geoLAT;
            rr:objectMap [
              rml:reference "Actor2Geo_Lat";
              ]
            ];


      rr:predicateObjectMap [
            rr:predicate cameo:geoFeatureID;
            rr:objectMap [
              rml:reference "Actor2Geo_FeatureID";
              ]
            ];
.
